<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Homework 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="HW_02_files/libs/clipboard/clipboard.min.js"></script>
<script src="HW_02_files/libs/quarto-html/quarto.js"></script>
<script src="HW_02_files/libs/quarto-html/popper.min.js"></script>
<script src="HW_02_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="HW_02_files/libs/quarto-html/anchor.min.js"></script>
<link href="HW_02_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="HW_02_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="HW_02_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="HW_02_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="HW_02_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Homework 2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>Due Date:</strong> 2022-10-16 at 8:30 AM PT</p>
<hr>
<p><strong>Name:</strong> Luke Schlake</p>
<p>For this assignment, you will practice downloadings, cleaning, and analyzing data from the <a href="https://hazards.fema.gov/nri/">National Risk Index (NRI)</a> and the <a href="https://www.atsdr.cdc.gov/placeandhealth/svi/index.html">CDC Social Vulnerability Index (SVI)</a>.</p>
<section id="preparation" class="level2">
<h2 class="anchored" data-anchor-id="preparation">Preparation</h2>
<ol type="1">
<li>Create a ‘data’ folder in the root directory of this repository.</li>
<li>Inside the ‘data’ folder, create a ‘raw’ folder.</li>
<li>Add and commit a ‘.gitignore’ file to the root directory of this repository that excludes all contents of the ‘data’ folder.</li>
<li>Download the county-level NRI and SVI data for the entire United States. Place the data in the ‘data/raw’ folder.</li>
<li>In the repository README, provide a brief (1-2 sentence) description of each file in the ‘data’ folder and a link to the original source of the data.</li>
</ol>
</section>
<section id="task-1---nri-data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="task-1---nri-data-cleaning">Task 1 - NRI Data Cleaning</h2>
<p><strong>1. Import the NRI data. Ensure that the <a href="https://en.wikipedia.org/wiki/Federal_Information_Processing_Standard_state_code">FIPS code</a> variable (‘STCOFIPS’) is correctly identified as a string / character variable. Otherwise, the leading zeros will be removed.</strong></p>
<div id="ebf778f1" class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> zipfile </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> zipfile.ZipFile(<span class="st">"data/raw/NRI_Table_Counties.zip"</span>,<span class="st">"r"</span>) <span class="im">as</span> f:</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    f.extractall(<span class="st">"data/raw/NRI"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>NRI_data<span class="op">=</span> pd.read_csv(<span class="st">"data/raw/NRI/NRI_Table_Counties.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="d5790f79" class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_rows<span class="op">=</span><span class="dv">18</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="321caf84" class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>NRI_data[<span class="st">"STCOFIPS"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="103">
<pre><code>0        1001
1        1003
2        1005
3        1007
4        1009
        ...  
3226    72151
3227    72153
3228    78010
3229    78020
3230    78030
Name: STCOFIPS, Length: 3231, dtype: int64</code></pre>
</div>
</div>
<p><strong>2. Subset the NRI data to include only the 5-digit state/county FIPS code and all colums ending with ‘_AFREQ’ and ‘_RISKR’. Each of these columns represents a different hazard type.</strong></p>
<div id="46699a1c" class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Filter for specific columns </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>NRI_filtered <span class="op">=</span> pd.DataFrame()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>NRI_filtered[<span class="st">"FIPS"</span>] <span class="op">=</span> NRI_data[<span class="st">"STCOFIPS"</span>]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> NRI_data.columns:</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p.endswith(<span class="st">"_AFREQ"</span>) <span class="op">|</span> p.endswith(<span class="st">"_RISKR"</span>):</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        NRI_filtered[p]<span class="op">=</span>NRI_data[p]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>NRI_filtered.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="104">
<pre><code>Index(['FIPS', 'AVLN_AFREQ', 'AVLN_RISKR', 'CFLD_AFREQ', 'CFLD_RISKR',
       'CWAV_AFREQ', 'CWAV_RISKR', 'DRGT_AFREQ', 'DRGT_RISKR', 'ERQK_AFREQ',
       'ERQK_RISKR', 'HAIL_AFREQ', 'HAIL_RISKR', 'HWAV_AFREQ', 'HWAV_RISKR',
       'HRCN_AFREQ', 'HRCN_RISKR', 'ISTM_AFREQ', 'ISTM_RISKR', 'LNDS_AFREQ',
       'LNDS_RISKR', 'LTNG_AFREQ', 'LTNG_RISKR', 'RFLD_AFREQ', 'RFLD_RISKR',
       'SWND_AFREQ', 'SWND_RISKR', 'TRND_AFREQ', 'TRND_RISKR', 'TSUN_AFREQ',
       'TSUN_RISKR', 'VLCN_AFREQ', 'VLCN_RISKR', 'WFIR_AFREQ', 'WFIR_RISKR',
       'WNTW_AFREQ', 'WNTW_RISKR'],
      dtype='object')</code></pre>
</div>
</div>
<p><strong>3. Create a table / dataframe that, for each hazard type, shows the number of missing values in the ‘_AFREQ’ and ‘_RISKR’ columns.</strong></p>
<div id="b64b1f43" class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame(NRI_filtered.isnull().<span class="bu">sum</span>())</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>data</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#text</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="105">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">FIPS</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">AVLN_AFREQ</td>
<td>3023</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">AVLN_RISKR</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CFLD_AFREQ</td>
<td>2646</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">CFLD_RISKR</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">VLCN_RISKR</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">WFIR_AFREQ</td>
<td>88</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">WFIR_RISKR</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">WNTW_AFREQ</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">WNTW_RISKR</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>37 rows × 1 columns</p>
</div>
</div>
</div>
<p><strong>4. Show the cross-tabulation of the ‘AVLN_AFREQ’ and ‘AVLN_RISKR’ columns (including missing values). What do you observe?</strong></p>
<div id="3d27c0be" class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>crosstab <span class="op">=</span> pd.crosstab(NRI_filtered[<span class="st">"AVLN_AFREQ"</span>],NRI_filtered[<span class="st">"AVLN_RISKR"</span>])</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>crosstab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="106">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">AVLN_RISKR</th>
<th data-quarto-table-cell-role="th">Relatively High</th>
<th data-quarto-table-cell-role="th">Relatively Low</th>
<th data-quarto-table-cell-role="th">Relatively Moderate</th>
<th data-quarto-table-cell-role="th">Very High</th>
<th data-quarto-table-cell-role="th">Very Low</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">AVLN_AFREQ</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0.010000</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>24</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0.016667</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>55</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0.033333</td>
<td>0</td>
<td>14</td>
<td>0</td>
<td>0</td>
<td>15</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0.050000</td>
<td>0</td>
<td>10</td>
<td>2</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0.066667</td>
<td>0</td>
<td>12</td>
<td>4</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0.616667</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0.900000</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0.983333</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1.016667</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1.150000</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>32 rows × 5 columns</p>
</div>
</div>
</div>
<p><strong>5. Assuming that a risk that is “not applicable” to a county has an annualized frequency of 0, impute the relevant missing values in the ‘_AFREQ’ columns with 0.</strong></p>
<div id="2c3d9004" class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> NRI_data.columns:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p.endswith(<span class="st">"_AFREQ"</span>):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        NRI_filtered[p]<span class="op">=</span>NRI_data[p].fillna(<span class="dv">0</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>NRI_filtered[<span class="st">"FIPS"</span>]<span class="op">=</span>NRI_filtered[<span class="st">"FIPS"</span>].astype(<span class="bu">str</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="task-2---svi-data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="task-2---svi-data-cleaning">Task 2 - SVI Data Cleaning</h2>
<p><strong>1. Import the SVI data. Ensure that the FIPS code is correctly identified as a string / character variable. Otherwise, the leading zeros will be removed.</strong></p>
<div id="9584990b" class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>SVI_data<span class="op">=</span> pd.read_csv(<span class="st">"data/raw/SVI_2022_US_county.csv"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>SVI_data[<span class="st">"FIPS"</span>]<span class="op">=</span>SVI_data[<span class="st">"FIPS"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#FIPS is successfully changed to an object</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>1. Subset the SVI data to include only the following columns:</strong> <code>ST, STATE, ST_ABBR, STCNTY, COUNTY, FIPS, LOCATION, AREA_SQMI, E_TOTPOP, EP_POV150, EP_UNEMP, EP_HBURD, EP_NOHSDP, EP_UNINSUR, EP_AGE65, EP_AGE17, EP_DISABL, EP_SNGPNT, EP_LIMENG, EP_MINRTY, EP_MUNIT, EP_MOBILE, EP_CROWD, EP_NOVEH, EP_GROUPQ, EP_NOINT, EP_AFAM, EP_HISP, EP_ASIAN, EP_AIAN, EP_NHPI, EP_TWOMORE, EP_OTHERRACE</code></p>
<div id="40624761" class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span> <span class="op">=</span> [<span class="st">"ST"</span>, <span class="st">"STATE"</span>, <span class="st">"ST_ABBR"</span>, <span class="st">"STCNTY"</span>, <span class="st">"COUNTY"</span>, <span class="st">"FIPS"</span>, <span class="st">"LOCATION"</span>, <span class="st">"AREA_SQMI"</span>, <span class="st">"E_TOTPOP"</span>, <span class="st">"EP_POV150"</span>, <span class="st">"EP_UNEMP"</span>, <span class="st">"EP_HBURD"</span>, <span class="st">"EP_NOHSDP"</span>, <span class="st">"EP_UNINSUR"</span>, <span class="st">"EP_AGE65"</span>, <span class="st">"EP_AGE17"</span>, <span class="st">"EP_DISABL"</span>, <span class="st">"EP_SNGPNT"</span>, <span class="st">"EP_LIMENG"</span>, <span class="st">"EP_MINRTY"</span>, <span class="st">"EP_MUNIT"</span>, <span class="st">"EP_MOBILE"</span>, <span class="st">"EP_CROWD"</span>, <span class="st">"EP_NOVEH"</span>, <span class="st">"EP_GROUPQ"</span>, <span class="st">"EP_NOINT"</span>, <span class="st">"EP_AFAM"</span>, <span class="st">"EP_HISP"</span>, <span class="st">"EP_ASIAN"</span>, <span class="st">"EP_AIAN"</span>, <span class="st">"EP_NHPI"</span>, <span class="st">"EP_TWOMORE"</span>, <span class="st">"EP_OTHERRACE"</span>]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>SVI_filtered<span class="op">=</span>pd.DataFrame()</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">list</span>:</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    SVI_filtered[x]<span class="op">=</span>SVI_data[x]</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>SVI_filtered[<span class="st">"FIPS"</span>]<span class="op">=</span>SVI_filtered[<span class="st">"FIPS"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>NRI_filtered[<span class="st">"FIPS"</span>]<span class="op">=</span>NRI_filtered[<span class="st">"FIPS"</span>].astype(<span class="bu">str</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>2. Create a table / dataframe that shows the number of missing values in each column. (Hint: if you wrote a function for Task 1, you can reuse it here.)</strong></p>
<div id="a4ce1358" class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame(SVI_filtered.isnull().<span class="bu">sum</span>())</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="110">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">ST</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">STATE</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ST_ABBR</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">STCNTY</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">COUNTY</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">EP_ASIAN</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">EP_AIAN</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">EP_NHPI</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">EP_TWOMORE</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">EP_OTHERRACE</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>33 rows × 1 columns</p>
</div>
</div>
</div>
</section>
<section id="task-3---data-merging" class="level2">
<h2 class="anchored" data-anchor-id="task-3---data-merging">Task 3 - Data Merging</h2>
<p><strong>1. Identify any FIPS codes that are present in the NRI data but not in the SVI data and vice versa. Describe any discrepancies and possible causes? What to these discrepancies, if any, mean for interpreting results based on the merged dataset moving forward?</strong></p>
<div id="75958c1e" class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#All the missing NRI missing FIPS codes in the SVI begin with 7 and are 5 digits (or are close to a FIPS code beginning with 7, ex: 69001)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#I used RANDChat for this block to determine the use of the .isin function</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>NRI_filtered[<span class="st">"matches"</span>] <span class="op">=</span> NRI_filtered[<span class="st">"FIPS"</span>].isin(SVI_filtered[<span class="st">"FIPS"</span>])</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>NRI_filtered[[<span class="st">"matches"</span>,<span class="st">"FIPS"</span>]].sort_values(by<span class="op">=</span><span class="st">"matches"</span>,ascending<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>NRI_filtered[[<span class="st">"matches"</span>,<span class="st">"FIPS"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="111">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">matches</th>
<th data-quarto-table-cell-role="th">FIPS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>True</td>
<td>1001</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>True</td>
<td>1003</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>True</td>
<td>1005</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>True</td>
<td>1007</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>True</td>
<td>1009</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3226</td>
<td>False</td>
<td>72151</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3227</td>
<td>False</td>
<td>72153</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3228</td>
<td>False</td>
<td>78010</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3229</td>
<td>False</td>
<td>78020</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3230</td>
<td>False</td>
<td>78030</td>
</tr>
</tbody>
</table>

<p>3231 rows × 2 columns</p>
</div>
</div>
</div>
<div id="46e83f9d" class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#All the missing NRI missing FIPS codes in the SVI begin with 9 and are 4 digits</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>SVI_filtered[<span class="st">"matches"</span>] <span class="op">=</span> SVI_filtered[<span class="st">"FIPS"</span>].isin(NRI_filtered[<span class="st">"FIPS"</span>])</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>SVI_filtered[[<span class="st">"matches"</span>,<span class="st">"FIPS"</span>]].sort_values(by<span class="op">=</span><span class="st">"matches"</span>,ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="112">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">matches</th>
<th data-quarto-table-cell-role="th">FIPS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>True</td>
<td>1001</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2088</td>
<td>True</td>
<td>39087</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2090</td>
<td>True</td>
<td>39091</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2091</td>
<td>True</td>
<td>39093</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2092</td>
<td>True</td>
<td>39095</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">314</td>
<td>False</td>
<td>9160</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">315</td>
<td>False</td>
<td>9170</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">316</td>
<td>False</td>
<td>9180</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">317</td>
<td>False</td>
<td>9190</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">310</td>
<td>False</td>
<td>9120</td>
</tr>
</tbody>
</table>

<p>3144 rows × 2 columns</p>
</div>
</div>
</div>
<p><strong>2. Merge the NRI and SVI data on the FIPS code. Use an outer join to keep all counties in the final dataset.</strong></p>
<div id="9a8e3a0f" class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> pd.merge(SVI_filtered, NRI_filtered, on<span class="op">=</span><span class="st">"FIPS"</span>,how<span class="op">=</span><span class="st">"outer"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>merged_data.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="113">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ST</th>
<th data-quarto-table-cell-role="th">STATE</th>
<th data-quarto-table-cell-role="th">ST_ABBR</th>
<th data-quarto-table-cell-role="th">STCNTY</th>
<th data-quarto-table-cell-role="th">COUNTY</th>
<th data-quarto-table-cell-role="th">FIPS</th>
<th data-quarto-table-cell-role="th">LOCATION</th>
<th data-quarto-table-cell-role="th">AREA_SQMI</th>
<th data-quarto-table-cell-role="th">E_TOTPOP</th>
<th data-quarto-table-cell-role="th">EP_POV150</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">TRND_RISKR</th>
<th data-quarto-table-cell-role="th">TSUN_AFREQ</th>
<th data-quarto-table-cell-role="th">TSUN_RISKR</th>
<th data-quarto-table-cell-role="th">VLCN_AFREQ</th>
<th data-quarto-table-cell-role="th">VLCN_RISKR</th>
<th data-quarto-table-cell-role="th">WFIR_AFREQ</th>
<th data-quarto-table-cell-role="th">WFIR_RISKR</th>
<th data-quarto-table-cell-role="th">WNTW_AFREQ</th>
<th data-quarto-table-cell-role="th">WNTW_RISKR</th>
<th data-quarto-table-cell-role="th">matches_y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>10.0</td>
<td>Delaware</td>
<td>DE</td>
<td>10001.0</td>
<td>Kent County</td>
<td>10001</td>
<td>Kent County, Delaware</td>
<td>586.060790</td>
<td>182400.0</td>
<td>20.1</td>
<td>...</td>
<td>Relatively Moderate</td>
<td>0.0</td>
<td>Insufficient Data</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.001183</td>
<td>Relatively Low</td>
<td>2.815900</td>
<td>Relatively High</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10.0</td>
<td>Delaware</td>
<td>DE</td>
<td>10003.0</td>
<td>New Castle County</td>
<td>10003</td>
<td>New Castle County, Delaware</td>
<td>426.336508</td>
<td>570567.0</td>
<td>16.5</td>
<td>...</td>
<td>Relatively Moderate</td>
<td>0.0</td>
<td>Insufficient Data</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.000668</td>
<td>Relatively Low</td>
<td>3.503866</td>
<td>Very High</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>10.0</td>
<td>Delaware</td>
<td>DE</td>
<td>10005.0</td>
<td>Sussex County</td>
<td>10005</td>
<td>Sussex County, Delaware</td>
<td>936.145129</td>
<td>240668.0</td>
<td>18.5</td>
<td>...</td>
<td>Relatively Low</td>
<td>0.0</td>
<td>Insufficient Data</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.001188</td>
<td>Relatively Moderate</td>
<td>2.573031</td>
<td>Relatively High</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1.0</td>
<td>Alabama</td>
<td>AL</td>
<td>1001.0</td>
<td>Autauga County</td>
<td>1001</td>
<td>Autauga County, Alabama</td>
<td>594.454786</td>
<td>58761.0</td>
<td>20.2</td>
<td>...</td>
<td>Relatively Moderate</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.000035</td>
<td>Very Low</td>
<td>0.433437</td>
<td>Very Low</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1.0</td>
<td>Alabama</td>
<td>AL</td>
<td>1003.0</td>
<td>Baldwin County</td>
<td>1003</td>
<td>Baldwin County, Alabama</td>
<td>1589.861817</td>
<td>233420.0</td>
<td>18.3</td>
<td>...</td>
<td>Relatively Moderate</td>
<td>0.0</td>
<td>Insufficient Data</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.002229</td>
<td>Relatively Moderate</td>
<td>0.182759</td>
<td>Relatively Low</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>1.0</td>
<td>Alabama</td>
<td>AL</td>
<td>1005.0</td>
<td>Barbour County</td>
<td>1005</td>
<td>Barbour County, Alabama</td>
<td>885.007619</td>
<td>24877.0</td>
<td>37.7</td>
<td>...</td>
<td>Relatively Moderate</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.000038</td>
<td>Very Low</td>
<td>0.185759</td>
<td>Very Low</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>1.0</td>
<td>Alabama</td>
<td>AL</td>
<td>1007.0</td>
<td>Bibb County</td>
<td>1007</td>
<td>Bibb County, Alabama</td>
<td>622.469286</td>
<td>22251.0</td>
<td>29.0</td>
<td>...</td>
<td>Relatively Moderate</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.000040</td>
<td>Very Low</td>
<td>0.743034</td>
<td>Very Low</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1.0</td>
<td>Alabama</td>
<td>AL</td>
<td>1009.0</td>
<td>Blount County</td>
<td>1009</td>
<td>Blount County, Alabama</td>
<td>644.890376</td>
<td>59077.0</td>
<td>22.9</td>
<td>...</td>
<td>Relatively Moderate</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.000035</td>
<td>Very Low</td>
<td>0.866873</td>
<td>Very Low</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>1.0</td>
<td>Alabama</td>
<td>AL</td>
<td>1011.0</td>
<td>Bullock County</td>
<td>1011</td>
<td>Bullock County, Alabama</td>
<td>622.814753</td>
<td>10328.0</td>
<td>47.4</td>
<td>...</td>
<td>Relatively Low</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.000074</td>
<td>Very Low</td>
<td>0.247678</td>
<td>Very Low</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>1.0</td>
<td>Alabama</td>
<td>AL</td>
<td>1013.0</td>
<td>Butler County</td>
<td>1013</td>
<td>Butler County, Alabama</td>
<td>776.838208</td>
<td>18981.0</td>
<td>33.8</td>
<td>...</td>
<td>Relatively Low</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.0</td>
<td>Not Applicable</td>
<td>0.000034</td>
<td>Very Low</td>
<td>0.185759</td>
<td>Very Low</td>
<td>True</td>
</tr>
</tbody>
</table>

<p>10 rows × 71 columns</p>
</div>
</div>
</div>
<p><strong>3. Create a table / dataframe that shows the number of missing values in each column of the merged dataset.</strong></p>
<div id="6e1ebc01" class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>missing_data<span class="op">=</span>merged_data.isnull().<span class="bu">sum</span>()</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>missing_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="114">
<pre><code>ST            96
STATE         96
ST_ABBR       96
STCNTY        96
COUNTY        96
              ..
WFIR_AFREQ     9
WFIR_RISKR     9
WNTW_AFREQ     9
WNTW_RISKR     9
matches_y      9
Length: 71, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="task-4---data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="task-4---data-analysis">Task 4 - Data Analysis</h2>
<p><strong>1. For each numerical variable in the merged dataset, plot a histogram showing the distribution of values. (Hint: write a function to make the histogram for a single variable, then use a loop or apply function to make the histograms for all numerical variables.)</strong></p>
<div id="9c977a98" class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#I used RANDchat to generate the is_number function and to see how the .apply/.all function was used to call is_number</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_number(s):</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">float</span>(s)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>merged_data<span class="op">=</span>merged_data.drop([<span class="st">"matches_y"</span>,<span class="st">"matches_x"</span>,<span class="st">"FIPS"</span>],axis<span class="op">=</span><span class="st">"columns"</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> merged_data.columns:</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    numeric <span class="op">=</span> merged_data[p].<span class="bu">apply</span>(is_number).<span class="bu">all</span>()</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> numeric<span class="op">==</span><span class="va">True</span>:</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(p)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>        plt.hist(merged_data[p])</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>        plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ST</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>STCNTY</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>AREA_SQMI</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-6.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>E_TOTPOP</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-8.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_POV150</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-10.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_UNEMP</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-12.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_HBURD</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-14.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_NOHSDP</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-16.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_UNINSUR</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-18.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_AGE65</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-20.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_AGE17</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-22.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_DISABL</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-24.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_SNGPNT</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-26.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_LIMENG</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-28.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_MINRTY</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-30.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_MUNIT</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-32.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_MOBILE</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-34.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_CROWD</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-36.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_NOVEH</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-38.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_GROUPQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-40.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_NOINT</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-42.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_AFAM</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-44.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_HISP</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-46.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_ASIAN</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-48.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_AIAN</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-50.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_NHPI</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-52.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_TWOMORE</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-54.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>EP_OTHERRACE</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-56.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>AVLN_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-58.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>CFLD_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-60.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>CWAV_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-62.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>DRGT_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-64.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>ERQK_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-66.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>HAIL_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-68.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>HWAV_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-70.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>HRCN_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-72.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>ISTM_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-74.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>LNDS_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-76.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>LTNG_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-78.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>RFLD_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-80.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>SWND_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-82.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>TRND_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-84.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>TSUN_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-86.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>VLCN_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-88.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>WFIR_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-90.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>WNTW_AFREQ</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="HW_02_files/figure-html/cell-17-output-92.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>